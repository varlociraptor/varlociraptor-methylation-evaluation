# Main entrypoint of the workflow.
# Please follow the best practices:
# https://snakemake.readthedocs.io/en/stable/snakefiles/best_practices.html,
# in particular regarding the standardized folder structure mentioned there.

from pathlib import Path


configfile: "config/config.yaml"


scattergather:
    split_candidates=config["scatter_number"],


# inputflags:
#     access.sequential

chromosome_by_platform = config["platforms"]
chromosomes = set(chromosome for chromosome in config["platforms"].values())
chr_chromosome = set("chr" + str(chromosome) for chromosome in chromosomes)
platform = config["data"]


report: "report/workflow.rst"


include: "rules/common.smk"
include: "rules/bismark.smk"
include: "rules/bisSnp.smk"
include: "rules/bsmap.smk"
include: "rules/get_alignments.smk"
include: "rules/get_data.smk"
include: "rules/get_reference_begraph.smk"
include: "rules/human_readable.smk"
include: "rules/mosdepth.smk"
include: "rules/methylDackel.smk"
include: "rules/modkit.smk"
include: "rules/plot_results.smk"
include: "rules/testcase.smk"
include: "rules/fake_data.smk"
include: "rules/pbCpgTools.smk"
include: "rules/meth_calling.smk"
include: "rules/compute_candidates.smk"


rule all:
    input:
        compute_results(),
