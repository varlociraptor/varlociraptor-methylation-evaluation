# Main entrypoint of the workflow.
# Please follow the best practices:
# https://snakemake.readthedocs.io/en/stable/snakefiles/best_practices.html,
# in particular regarding the standardized folder structure mentioned there.

from pathlib import Path


configfile: "config/config_simulate.yaml"


scattergather:
    split_candidates=config["scatter_number"],


chromosome_by_seq_platform = config["seq_platforms"]
chromosomes = set(chromosome for chromosome in config["seq_platforms"].values())
chr_chromosome = set(f"chr{chromosome}" for chromosome in chromosomes)
seq_platform = config["data"]


report: "report/workflow.rst"


include: "rules/download_data.smk"
include: "rules/common.smk"
include: "rules/alignments.smk"
include: "rules/bisSnp.smk"
include: "rules/bsmapz.smk"
include: "rules/candidates.smk"
include: "rules/mason.smk"
include: "rules/methylDackel.smk"
include: "rules/modkit.smk"
include: "rules/plot_results.smk"
include: "rules/pbCpgTools.smk"
include: "rules/varlociraptor_multi_sample.smk"
include: "rules/varlociraptor_single_sample.smk"
include: "rules/bismark.smk"


rule all:
    input:
        compute_results(),
